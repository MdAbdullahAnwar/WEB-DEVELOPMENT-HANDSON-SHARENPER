Watch the following videos for understanding promises and async and await.

Promises

Independent Promises

Dependent Promises

Async and await.



After watching the videos complete the following questions:

Predict the output for the codes:



1.console.log("start")

const promise1= new Promise((resolve,reject)=>{

  console.log(1)

})

console.log("end")



2 function performTask(){

  return new Promise((resolve,reject)=>{

    reject();

  })

}

let taskPromise= performTask();

taskPromise.then(()=>{

  console.log("Success 1");

}).then(()=>{

  console.log("Success 2")

}).catch(()=>{

  console.log("Error 1")

}).then(()=>{

  console.log("Success 3")

})



3.console.log('Start');

setTimeout(() => {

console.log('Timeout');

}, 0);

Promise.resolve().then(() => {

console.log('Promise resolved');

});

console.log('End');



4.var p = new Promise((resolve, reject) => {

  return Promise.reject(Error('The Fails!'))

})

p.catch(error => console.log(error.message))

p.catch(error => console.log(error.message))



5.async function foo() {

  console.log("A");

  await Promise.resolve();

  console.log("B");

  await new Promise(resolve => setTimeout(resolve, 0));

  console.log("C");

}


console.log("D");

foo();

console.log("E");



Ques1. Predict the answer for question 1.

Ans: start 1 end


Answer Explanation

Synchronous (Promise constructor runs immediately) so  the code runs synchronously.

The console.log("start") executes first, followed by the creation of the promise, which immediately logs 1 to the console. Finally, console.log("end") runs, resulting in the output: start 1 end.



Ques2. Predict the output for question 2

Ans: Error 1 Success 3


Answer Explanation

The promise returned by performTask is rejected. The first .then() does not execute because the promise was rejected, so control goes to the .catch() block, which logs Error 2. After handling the error, the next .then() is executed, logging Success 3. The output is thus Error 2 Success 3.



Ques3. Predict the output for question 3

Ans: Start End Promise resolved Timeout


Answer Explanation

 The code runs synchronously until it hits the setTimeout. The sequence is:

console.log('Start') prints Start.
setTimeout is scheduled (macrotask).
Promise.resolve() is called, which queues the .then() callback as a microtask.
console.log('End') prints End.
The microtask from the promise resolves and logs Promise resolved.
Finally, the macrotask from setTimeout executes, logging Timeout. The full output is Start End Promise resolved Timeout.



Ques4. Predict the output for question 4

Ans: Error message


Answer Explanation

Pending State: The outer promise (p) is pending because it has not been settled. Hence, .catch() does not execute.



Ques5. Predict the output for question 5

Ans: D A E B C


Answer Explanation

The sequence of execution is as follows:

console.log("D") executes first, printing D.
The foo() function is called, logging A next.
The first await pauses foo(), allowing the rest of the synchronous code to execute.
console.log("E") runs and logs E.
The first await resolves, and console.log("B") executes.
The second await waits for the setTimeout to complete, and once it does, console.log("C") is executed. The final output is D A E B C.
